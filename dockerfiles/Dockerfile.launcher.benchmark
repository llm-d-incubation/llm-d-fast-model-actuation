ARG BASE_IMAGE=vllm/vllm-openai:latest
FROM ${BASE_IMAGE}

WORKDIR /app

COPY inference_server/launcher/launcher.py inference_server/launcher/gputranslator.py /app/

# Install uvicorn for serving the launcher API and pynvml for gputranslator
RUN pip install --root-user-action=ignore --no-cache-dir uvicorn pynvml

ENTRYPOINT ["uvicorn", "--app-dir", "/app", "launcher:app"]
